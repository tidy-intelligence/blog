---
title: "Tidy Data Visualization: ggplot2 vs plotnine vs TidierPlots"
description: "A comparison of implementations of the grammar of graphics in R, Python, and Julia."
metadata:
  pagetitle: "Tidy Data Visualization: ggplot2 vs plotnine vs TidierPlots"
author: "Christoph Scheuch"
date: "2024-01-11" 
image: thumbnail.png
image-alt: An image of a calm office setting with three equally sized screens placed centrally. Each screen displays a simple line chart without any text or numbers. The office is well-lit, tidy, and features a minimalist design. The screens are aligned side by side on a sleek, modern desk, occupying the center of the image. The line charts are clear and straightforward. The office has a professional ambiance, with soft, ambient lighting and a few minimal decorative elements, emphasizing the symmetry and equal size of the screens. Created with DALL-E 3.
draft: true
---
 
```{r}
#| echo: false
#| message: false
# Note that this code chunk is only required because of a bug with JuliaCall that prevents julia_setup() from finding the installation: https://github.com/quarto-dev/quarto-cli/issues/7055
JuliaCall::julia_setup("/Applications/Julia-1.9.app/Contents/Resources/julia/bin/")
```

Both `ggplot2` and `plotnine` are based on Leland Wilkinson's Grammar of Graphics, a set of principles for creating consistent and effective statistical graphics. This means they both use similar syntax and logic for constructing plots, making it relatively easy for users to transition between them. `ggplot2`, developed by Hadley Wickham, is a cornerstone of the R community and integrates seamlessly with other `tidyverse` packages. `plotnine`, on the other hand, is a Python package that attempts to bring `ggplot2` functionality and philosophy to Python users, but it is not part of a larger ecosytem (although it works well with `pandas`, Python's most popular data manipulation package).

The types of plots that I chose for the comparison heavily draw on the examples given in [R for Data Science](https://r4ds.hadley.nz/data-visualize).

::: {.panel-tabset}
### R
```{r}
library(ggplot2)
library(palmerpenguins)

penguins <- na.omit(palmerpenguins::penguins)

ggplot(penguins, 
       aes(x = bill_length_mm, y = bill_depth_mm, 
           color = species, shape = species)) + 
  geom_point() + 
  geom_smooth(method = "lm") +
  labs(x = "Bill length (mm)", y = "Bill Width (mm)", 
       title = "Bill Length vs. Bill Width", 
       subtitle = "Using geom_point and geom_smooth",
       color = "Species", shape = "Species") +
  theme_minimal()
```
### Python
```{python}
from plotnine import *
from palmerpenguins import load_penguins

penguins = load_penguins().dropna()

(ggplot(penguins, 
        aes(x = "bill_length_mm", y = "bill_depth_mm", 
            color = "species", shape = "species"))
  + geom_point()
  + geom_smooth(method = "lm")
  + labs(x = "Bill Length (mm)", y = "Bill Width (mm)", 
         title = "Bill Length vs. Bill Width", 
         subtitle = "Using geom_point and geom_smooth",
         color = "Species", shape = "Species")
  + theme_minimal()
)
```
### Julia
```{julia}
#| output: false
using TidierPlots
using DataFrames
using PalmerPenguins

# Set the backend
using Plots
gr()

# Set plotting options
TidierPlots_set("plot_show", false)
TidierPlots_set("plot_log", false)

penguins = dropmissing(DataFrame(PalmerPenguins.load()))
```

```{julia}
penguins_plot = ggplot(penguins,
      aes(x = "bill_length_mm", y = "bill_depth_mm",
          color = "species", shape = "species")) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(x = "Bill length (mm)", y = "Bill Width (mm)",
       title = "Bill Length vs. Bill Width",
       subtitle = "Using geom_point and geom_smooth",
       color = "Species", shape = "Species") +
  theme_minimal()

draw_ggplot(penguins_plot)
```
::: 

## Visualizing Distributions

### A categorical variable

### A numerical variable

## Visualizing Relationships

### A numerical and a categorical variable

### Two categorical variables

### Two numerical variables

### Three or more variables

## Saving Plots

## Conclusion

`+` has tom come at the end of the line R, not at the start. In Python, it makes more sense to have it at the start because you can comment out code better. 

In terms of syntax, `ggplot2` and `plotnine` are remarkably similar, with minor differences primarily due to the differences between R and Python. Both use a layer-based approach, where a plot is built up by adding components like axes, geoms, stats, and scales. However, `ggplot2` benefits from R’s native support for data frames and its formula notation, which can make its syntax more concise. `plotnine` has to adhere to Python’s syntax rules, in particular referring to columns via strings, which can occasionally lead to more verbose code.
